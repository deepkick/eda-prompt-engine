# GPT-5.2 Output — EDA Prompt v2 — Titanic (describe summary)

- Model: ChatGPT 5.2
- Date: 2026-02-14
- Prompt: prompts/eda_v2.md
- Input: tests/titanic_summary.txt
- Chat: new chat (no prior context)
- Notes: (optional) UI / settings if relevant

---

## Output

【1. 重要な事実】

* 観測数は `survived/pclass/sibsp/parch/fare` が **891**、`age` が **714** である（count: 891 vs 714）。
* `survived` の平均は **0.383838**、中央値（50%）は **0.000000**、第3四分位（75%）は **1.000000** である。
* `pclass` は最小 **1.000000**、中央値 **3.000000**、最大 **3.000000** である（min=1, 50%=3, max=3）。
* `age` は中央値 **28.000000**、四分位範囲は **20.125000–38.000000**、最大値は **80.000000** である（25%=20.125, 75%=38, max=80）。
* `fare` は中央値 **14.454200** に対して平均 **32.204208**、最大値 **512.329200** である（50%=14.4542, mean=32.204208, max=512.3292）。

【2. 欠損分析】

* 欠損率（総数を 891 とみなし、欠損数 = 891 - count で算出）

  * survived: (891-891)/891 = **0.00%**
  * pclass: (891-891)/891 = **0.00%**
  * age: (891-714)/891 = 177/891 = **19.87%**
  * sibsp: (891-891)/891 = **0.00%**
  * parch: (891-891)/891 = **0.00%**
  * fare: (891-891)/891 = **0.00%**
* 欠損率10%以上の変数

  * **age（19.87%）**
* 欠損が分析に与えるリスク（1文）

  * `age` の欠損 **19.87%** により、`age` を使う推定・学習で有効サンプルが **891→714** に減り、推定値やモデル評価が欠損処理方法に依存する。

【3. 外れ値候補】

* 使った基準：**IQR基準（上側） = Q3 + 1.5 × IQR（IQR = Q3 − Q1）**
* 上側しきい値と超過の有無

  * age: IQR = 38.0000 − 20.1250 = **17.8750**、上側= 38.0000 + 1.5×17.8750 = **64.8125**、max= **80.0000**（超過）
  * fare: IQR = 31.0000 − 7.9104 = **23.0896**、上側= 31.0000 + 1.5×23.0896 = **65.6344**、max= **512.3292**（超過）
  * sibsp: IQR = 1.0000 − 0.0000 = **1.0000**、上側= 1.0000 + 1.5×1.0000 = **2.5000**、max= **8.0000**（超過）
  * parch: IQR = 0.0000 − 0.0000 = **0.0000**、上側= 0.0000 + 1.5×0.0000 = **0.0000**、max= **6.0000**（超過）
  * pclass: IQR = 3.0000 − 2.0000 = **1.0000**、上側= 3.0000 + 1.5×1.0000 = **4.5000**、max= **3.0000**（非超過）
  * survived: IQR = 1.0000 − 0.0000 = **1.0000**、上側= 1.0000 + 1.5×1.0000 = **2.5000**、max= **1.0000**（非超過）
* データエラーの可能性（候補）

  * `fare` は上側しきい値 **65.6344** に対して最大 **512.3292** と乖離幅が **446.6948** ある。
  * `parch` は IQR=**0** のため上側しきい値が **0** になり、最大 **6** が形式的に外れ値扱いとなる（基準自体が不安定）。
* レアだが真実の可能性（候補）

  * `age` の max **80.0000** は上側しきい値 **64.8125** を超えるが、値域（min **0.4200**〜max **80.0000**）内の観測として存在する。
  * `sibsp` の max **8.0000** は上側しきい値 **2.5000** を超えるが、min **0**〜max **8** の範囲内の観測として存在する。

【4. 推測（明示的に推測と書く）】

* 推測：`fare` は平均 **32.204208** が中央値 **14.454200** を上回り、かつ max **512.329200** が 75%点 **31.000000** を大きく上回るため、分布が平均側に引っ張られる形状（右側に長い形状）である可能性がある；追加で必要な情報：`fare` のヒストグラム/箱ひげ図、対数変換後の分布、上位1%点などの分位点。
* 推測：`survived` は min **0.000000**, 25% **0.000000**, 50% **0.000000**, 75% **1.000000**, max **1.000000** であるため、値が0と1に集中している可能性がある；追加で必要な情報：`survived` のユニーク値一覧とカウント（value_counts）。
* 推測：`parch` は 25% **0.000000**, 50% **0.000000**, 75% **0.000000** で IQR=**0** のため、0が多数を占める可能性がある；追加で必要な情報：`parch` の度数分布（0,1,2,…の割合）と、0以外のサンプル数。

【5. 次の最小実験セット（3つのみ）】

1. **目的**：`age` 欠損（19.87%）の処理が下流の推定・学習に与える影響を定量化する

   * **手法（具体的手法名）**：完全ケース解析（listwise deletion） vs 中央値補完（median imputation） vs 多重代入（MICE: Multiple Imputation by Chained Equations）
   * **評価指標**：欠損後の有効サンプル数（714/891）、補完後の `age` の要約統計の変化量（mean/median/std の差分）

2. **目的**：IQR基準で外れ値候補となった `fare/sibsp/age/parch` の上位値が推定・学習を不安定化させるかを検証する

   * **手法（具体的手法名）**：IQR上側しきい値でのキャッピング（winsorization: cap at Q3+1.5IQR） vs ロバストスケーリング（RobustScaler: median/IQR）
   * **評価指標**：キャッピング対象比率（例：`fare > 65.6344` の割合）、変換前後の標準偏差（std）の変化量

3. **目的**：`survived` を目的変数とする予測問題としてのベースライン性能を確立する（このステップは `survived` の値域が 0〜1 であることを根拠に「二値分類」という仮定を置く）

   * **手法（具体的手法名）**：ロジスティック回帰（Logistic Regression）＋欠損処理（上記1のいずれかを固定）＋ロバストスケーリング（RobustScaler）
   * **評価指標**：AUC（ROC-AUC）、欠損処理別のAUC差分

