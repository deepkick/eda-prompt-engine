# GPT-5.2 Output — EDA Prompt v3 — Titanic (describe summary)

- Model: ChatGPT 5.2
- Date: 2026-02-14
- Prompt: prompts/eda_v3.md
- Input: tests/titanic_summary.txt
- Chat: new chat (no prior context)
- Notes: (optional) UI / settings if relevant

---

## Output

【1. 重要な事実】

* **型分類**：`survived`は**Binary(0/1)**（min=0, 75%=1, max=1）、`pclass`は**Ordinal**（min=1, 50%=3, max=3の順序値）、`sibsp/parch`は**Count(0以上の整数)**（sibsp: min=0, max=8；parch: min=0, max=6）、`age/fare`は**Continuous(実数)**（age: min=0.42, max=80；fare: min=0.0, max=512.3292）。
* 観測数は総数 **891** で、`age`のみ **count=714** と少ない（他の変数は count=891）。
* `parch`は第3四分位が **0**（75%=0）であり、少なくとも **75%** の行で `parch<=0`（かつ min=0 なので `parch=0` が75%以上）である。
* `sibsp`は中央値が **0**（50%=0）であり、少なくとも **50%** の行で `sibsp=0` である（min=0）。
* `fare`は中央値 **14.4542** に対し平均 **32.204208**、最大 **512.3292** とレンジが大きい（min=0.0）。

【2. 欠損分析】

* 欠損率（欠損率=1-count/総数、総数=891）

  * survived: 1-891/891 = **0.0000 (0.00%)**
  * pclass: 1-891/891 = **0.0000 (0.00%)**
  * age: 1-714/891 = **0.1987 (19.87%)**
  * sibsp: 1-891/891 = **0.0000 (0.00%)**
  * parch: 1-891/891 = **0.0000 (0.00%)**
  * fare: 1-891/891 = **0.0000 (0.00%)**
* 欠損率10%以上の変数：**age（19.87%）**
* リスク：`age`の扱い（除外・補完・モデル内処理）によって推定結果が大きく変わりうるため、**欠損処理に依存する**。

【3. 逸脱（Outlier / Rare）候補】

* **Continuous（IQR上側しきい値で判定）**

  * `age`：IQR = Q3-Q1 = 38.0-20.125 = **17.875**、上側しきい値 = 38.0 + 1.5×17.875 = **64.8125**、max=**80.0** は **超過**。
  * `fare`：IQR = 31.0-7.9104 = **23.0896**、上側しきい値 = 31.0 + 1.5×23.0896 = **65.6344**、max=**512.3292** は **超過**。
* **Count/Ordinal/Binary（IQRは使わない → レア値の可能性を指摘）**

  * `sibsp`（min=0, 75%=1, max=8）：**8**などの高値がどれだけ出るかは統計量だけでは確定できないため、**value_counts** が必要。
  * `parch`（min=0, 75%=0, max=6）：**6**などの高値がどれだけ出るかは統計量だけでは確定できないため、**value_counts** が必要。
  * `pclass`（min=1, max=3）：各クラスの偏りは統計量だけでは確定できないため、**value_counts** が必要。
  * `survived`（0/1）：クラス不均衡の程度は平均 **0.383838** から一部示唆されるが、厳密には **value_counts** が必要。
* **データエラーの可能性**

  * `fare`のmax=**512.3292** はIQR上側しきい値 **65.6344** を大きく超えるため、入力ミス・単位混在・集計粒度の混在などは統計量だけでは確定できない（追加情報：該当行の原票、通貨/単位、生成ロジック）。
* **レアだが真実の可能性**

  * `age`のmax=**80** はIQR上側しきい値 **64.8125** を超えるが、実在値か誤りかは統計量だけでは確定できない（追加情報：該当行の原票、年齢の定義、入力ルール）。
  * `sibsp`のmax=**8**、`parch`のmax=**6** は稀な構成か誤りかは統計量だけでは確定できない（追加情報：value_counts と該当行の確認）。
* ※IQR基準は `age/fare` で **IQR>0** のため **基準不安定ではない**（age IQR=17.875、fare IQR=23.0896）。

【4. 推測（必ず '推測:' で始める）】

* 推測: `fare`の分布形状（右に歪んでいるか等）は統計量だけでは確定できない；根拠: 平均 **32.204208** と中央値 **14.4542** の乖離、max **512.3292**；不足情報: ヒストグラム、上位分位点（90/95/99%）、歪度・尖度。
* 推測: `age`の欠損がランダム欠損（MCAR）かどうかは統計量だけでは確定できない；根拠: `age`のみ欠損率 **19.87%**；不足情報: 欠損フラグと他変数（pclass/fare/sibsp/parch/survived等）のクロス集計・欠損パターン解析。
* 推測: `sibsp/parch`の「0の集中度合い」や離散分布の形は統計量だけでは確定できない；根拠: sibspの50%=**0**、parchの75%=**0**、最大はsibsp=**8**/parch=**6**；不足情報: value_counts、分布プロット、（必要なら）ゼロ過剰の検定やモデル比較。

【5. 次の最小実験セット（3つのみ）】

1. **目的**：型分類の妥当性・分布・レア値頻度を確定する／**手法**：`value_counts`（survived/pclass/sibsp/parch）＋ヒストグラム/ECDF（age/fare）＋上位分位点(90/95/99%)算出／**評価指標**：レア値比率（例：top-k値の出現率）、分布要約（分位点テーブルの再現性）。
2. **目的**：`age`欠損の扱いが下流に与える影響を最小コストで見積もる／**手法**：欠損フラグ作成＋補完3系統（単純中央値、KNNImputer、IterativeImputer）を比較／**評価指標**：下流モデルの **AUC**（目的変数=survived想定）と **LogLoss** の差分、加えて欠損フラグの重要度（Permutation Importance等）。
3. **目的**：外れ値候補（age>64.8125, fare>65.6344）の扱い方針を決める／**手法**：連続変数のWinsorize（上側クリップ）vs そのまま vs ロバスト変換（log1p(fare)等）を3条件で学習比較／**評価指標**：下流モデルの **AUC / LogLoss**、および校正（Brier score など目的に応じて）。

